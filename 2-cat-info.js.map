{"version":3,"file":"2-cat-info.js","sources":["../src/js/cat-info/cat-api.js","../src/js/cat-info/render-functions.js","../src/js/cat-info/cat-info-main.js"],"sourcesContent":["import axios from 'axios';\n\nconst myApiKey =\n  'live_ gCrMzxVedQewgspyzOBQIG2uzIc7uX ZZLlOa2KWOyd9IsmmF2onJcOmaXJlO sQfP';\n\naxios.defaults.headers.common['x-api-key'] = myApiKey;\n\n// Функция запроса на бэкенд всех пород кошек\nfunction fetchBreeds() {\n  return axios.get('https://api.thecatapi.com/v1/breeds').then(response => {\n    return response.data;\n  });\n}\n\n// Функция запроса на бэкенд одной породы кошки, ожидающая получить аргументом Id породы\nfunction fetchBreedInfo(breedId) {\n  return axios\n    .get(`https://api.thecatapi.com/v1/breeds/${breedId}`)\n    .then(response => {\n      return response.data;\n    });\n}\n\n// Функция запроса на бэкенд фотографии кошеки, ожидающая получить аргументом Id породы\nfunction fetchCatByBreed(breedId) {\n  return axios\n    .get(`https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`)\n    .then(response => {\n      return response;\n    });\n}\n\n// Именованный экспорт всех функций\nexport { fetchBreeds, fetchBreedInfo, fetchCatByBreed };\n","// Именованный импорт\nimport { fetchBreedInfo } from './cat-api';\n\n// Получаем в переменную HTML-элемент loader\nconst loaderEl = document.querySelector('.loader');\n\n// Функция создания списка всех пород кошек\nfunction createSelect(breeds, breedSelect) {\n  // Отображаем HTML-элемент списка\n  breedSelect.classList.remove('is-hidden');\n\n  // Перебераем через forEach полученный из запросак массив объектов\n  // и отображаем имена пород в списке\n  breeds.forEach(breed => {\n    const option = document.createElement('option');\n    option.value = breed.id;\n    option.textContent = breed.name;\n    breedSelect.appendChild(option);\n  });\n}\n\n// Функция отображения информации о выбранной породе\nfunction createInfo(card, breedSelect, infoContainer, iziToastOptions) {\n  // Сохраняем в перменную объект полученный из запроса\n  const cat = card.data[0];\n\n  // Реализация допролнительного запроса информации по значению выбранному из списка,\n  // создание отобаржаемой карточки,\n  // обработка ошибки\n  fetchBreedInfo(breedSelect.value)\n    .then(breed => {\n      const cardMarkup = `\n<div class=\"cat-card\">\n  <img src=\"${cat.url}\" alt=\"${breed.name}\" class=\"cat-img\" />\n  <div class=\"cat-description\">\n    <h2>${breed.name}</h2>\n    <p><strong>Temperament:</strong> ${breed.temperament}</p>\n    <p><strong>Description:</strong> ${breed.description}</p>\n  </div>\n</div>\n    `;\n      // Отображаем контейнер\n      infoContainer.classList.remove('is-hidden');\n\n      // Добавляем в контейнер нашу карточку\n      infoContainer.innerHTML = cardMarkup;\n    })\n    .catch(error => {\n      // Отображаем сообщение об ошибке\n      iziToastOptions(error);\n    });\n}\n\n// Функция отображения Loader\nfunction showLoader() {\n  loaderEl.classList.add('active');\n}\n\n// Функция скрывания Loader\nfunction hideLoader() {\n  loaderEl.classList.remove('active');\n}\n\n// Именованный экспорт всех функций\nexport { createSelect, createInfo, showLoader, hideLoader };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '@fortawesome/fontawesome-free/css/all.min.css';\n// Именованный импорт\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\n// Именованный импорт\nimport {\n  createSelect,\n  createInfo,\n  showLoader,\n  hideLoader,\n} from './render-functions';\nimport '../../css/styles.css';\n\n// Получаем в переменную HTML-элемент списка\nconst breedSelect = document.querySelector('.breed-select');\n\n// Получаем в переменную контейнер для рендера информации\nconst infoContainer = document.querySelector('.cat-info');\n\n// Вешаем слушатель события change на HTML-элемент списка\nbreedSelect.addEventListener('change', onbreedSelect);\n\n// Скрываем HTML-элемент списка\nbreedSelect.classList.add('is-hidden');\n\n// Отображения loader\nshowLoader();\n\n// Реализация запроса всех пород кошек, создание списка, оброботка ошибки\nfetchBreeds()\n  .then(response => {\n    createSelect(response, breedSelect);\n  })\n  .catch(error => {\n    // Отображаем сообщение об ошибке\n    iziToastOptions(error);\n\n    // Скрываем HTML-элемент списка\n    breedSelect.classList.add('is-hidden');\n  })\n  .finally(() => {\n    // Скрываем Loader\n    hideLoader();\n  });\n\n// Обработчик слушателя события\nfunction onbreedSelect() {\n  // Скрываем контейнер\n  infoContainer.classList.add('is-hidden');\n\n  // Отображения loader\n  showLoader();\n\n  // Получаем в переменную значение выбранное из списка\n  const selectedCatId = breedSelect.value;\n\n  // Реализация запроса породы кошки по значению выбранному из списка,\n  // отображение данных, обработка ошибки\n  fetchCatByBreed(selectedCatId)\n    .then(response => {\n      createInfo(response, breedSelect, infoContainer, iziToastOptions);\n    })\n    .catch(error => {\n      // Отображаем сообщение об ошибке\n      iziToastOptions(error);\n    })\n    .finally(() => {\n      // Скрываем Loader\n      hideLoader();\n    });\n}\n\n// Опции подключенного через библиотеку alert\nfunction iziToastOptions() {\n  return iziToast.show({\n    message: 'Oops! Something went wrong! Try reloading the page!',\n    messageColor: 'white',\n    backgroundColor: 'red',\n    icon: '\tfa fa-ban',\n    iconColor: '#8b0000',\n    position: 'topRight',\n  });\n}\n"],"names":["myApiKey","axios","fetchBreeds","response","fetchBreedInfo","breedId","fetchCatByBreed","loaderEl","createSelect","breeds","breedSelect","breed","option","createInfo","card","infoContainer","iziToastOptions","cat","cardMarkup","error","showLoader","hideLoader","onbreedSelect","selectedCatId","iziToast"],"mappings":"2FAEA,MAAMA,EACJ,2EAEFC,EAAM,SAAS,QAAQ,OAAO,WAAW,EAAID,EAG7C,SAASE,GAAc,CACrB,OAAOD,EAAM,IAAI,qCAAqC,EAAE,KAAKE,GACpDA,EAAS,IACjB,CACH,CAGA,SAASC,EAAeC,EAAS,CAC/B,OAAOJ,EACJ,IAAI,uCAAuCI,CAAO,EAAE,EACpD,KAAKF,GACGA,EAAS,IACjB,CACL,CAGA,SAASG,EAAgBD,EAAS,CAChC,OAAOJ,EACJ,IAAI,wDAAwDI,CAAO,EAAE,EACrE,KAAKF,GACGA,CACR,CACL,CC1BA,MAAMI,EAAW,SAAS,cAAc,SAAS,EAGjD,SAASC,EAAaC,EAAQC,EAAa,CAEzCA,EAAY,UAAU,OAAO,WAAW,EAIxCD,EAAO,QAAQE,GAAS,CACtB,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQD,EAAM,GACrBC,EAAO,YAAcD,EAAM,KAC3BD,EAAY,YAAYE,CAAM,CAClC,CAAG,CACH,CAGA,SAASC,EAAWC,EAAMJ,EAAaK,EAAeC,EAAiB,CAErE,MAAMC,EAAMH,EAAK,KAAK,CAAC,EAKvBV,EAAeM,EAAY,KAAK,EAC7B,KAAKC,GAAS,CACb,MAAMO,EAAa;AAAA;AAAA,cAEXD,EAAI,GAAG,UAAUN,EAAM,IAAI;AAAA;AAAA,UAE/BA,EAAM,IAAI;AAAA,uCACmBA,EAAM,WAAW;AAAA,uCACjBA,EAAM,WAAW;AAAA;AAAA;AAAA,MAKlDI,EAAc,UAAU,OAAO,WAAW,EAG1CA,EAAc,UAAYG,CAC3B,CAAA,EACA,MAAMC,GAAS,CAEdH,EAAgBG,CAAK,CAC3B,CAAK,CACL,CAGA,SAASC,GAAa,CACpBb,EAAS,UAAU,IAAI,QAAQ,CACjC,CAGA,SAASc,GAAa,CACpBd,EAAS,UAAU,OAAO,QAAQ,CACpC,CC9CA,MAAMG,EAAc,SAAS,cAAc,eAAe,EAGpDK,EAAgB,SAAS,cAAc,WAAW,EAGxDL,EAAY,iBAAiB,SAAUY,CAAa,EAGpDZ,EAAY,UAAU,IAAI,WAAW,EAGrCU,EAAY,EAGZlB,EAAW,EACR,KAAKC,GAAY,CAChBK,EAAaL,EAAUO,CAAW,CACnC,CAAA,EACA,MAAMS,GAAS,CAEdH,EAAqB,EAGrBN,EAAY,UAAU,IAAI,WAAW,CACtC,CAAA,EACA,QAAQ,IAAM,CAEbW,EAAY,CAChB,CAAG,EAGH,SAASC,GAAgB,CAEvBP,EAAc,UAAU,IAAI,WAAW,EAGvCK,EAAY,EAGZ,MAAMG,EAAgBb,EAAY,MAIlCJ,EAAgBiB,CAAa,EAC1B,KAAKpB,GAAY,CAChBU,EAAWV,EAAUO,EAAaK,EAAeC,CAAe,CACjE,CAAA,EACA,MAAMG,GAAS,CAEdH,EAAqB,CACtB,CAAA,EACA,QAAQ,IAAM,CAEbK,EAAY,CAClB,CAAK,CACL,CAGA,SAASL,GAAkB,CACzB,OAAOQ,EAAS,KAAK,CACnB,QAAS,sDACT,aAAc,QACd,gBAAiB,MACjB,KAAM,aACN,UAAW,UACX,SAAU,UACd,CAAG,CACH"}